!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("react"),require("react-dom")):"function"==typeof define&&define.amd?define(["react","react-dom"],e):"object"==typeof exports?exports["react-gitgraph"]=e(require("react"),require("react-dom")):t["react-gitgraph"]=e(t.react,t["react-dom"])}(this,function(t,e){return function(t){function e(o){if(i[o])return i[o].exports;var s=i[o]={i:o,l:!1,exports:{}};return t[o].call(s.exports,s,s.exports,e),s.l=!0,s.exports}var i={};return e.m=t,e.c=i,e.d=function(t,i,o){e.o(t,i)||Object.defineProperty(t,i,{configurable:!1,enumerable:!0,get:o})},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=0)}([function(t,e,i){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function n(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(t[o]=i[o])}return t},h=function(){function t(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,i,o){return i&&t(e.prototype,i),o&&t(e,o),e}}(),c=i(1),m=o(c),l=i(2),p=(o(l),i(3)),u=o(p),f=function(t){function e(t){s(this,e);var i=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.state={gitgraph:null},i.commit=i.commit.bind(i),i}return n(e,t),h(e,[{key:"componentDidMount",value:function(){i(8);var t=r({},this.props.options,{canvas:this.canvas}),e=new GitGraph(t);this.props.initializeGraph(e),this.setState({gitgraph:e})}},{key:"getGitGraph",value:function(){return this.state.gitgraph}},{key:"initializeGraphInner",value:function(){var t=this.state.gitgraph;this.props.initializeGraph(t),this.setState({gitgraph:t})}},{key:"commit",value:function(){var t=this.state.gitgraph;t.commit(),this.setState({gitgraph:t})}},{key:"render",value:function(){var t=this;return m.default.createElement("canvas",{id:"gitGraph",ref:function(e){t.canvas=e}})}}]),e}(m.default.Component);e.default=f,f.propTypes={options:u.default.object.isRequired,graph:u.default.object,gitgraph:u.default.object,initializeGraph:u.default.func.isRequired}},function(e,i){e.exports=t},function(t,i){t.exports=e},function(t,e,i){t.exports=i(4)()},function(t,e,i){"use strict";var o=i(5),s=i(6),a=i(7);t.exports=function(){function t(t,e,i,o,n,r){r!==a&&s(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types")}function e(){return t}t.isRequired=t;var i={array:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e};return i.checkPropTypes=o,i.PropTypes=i,i}},function(t,e,i){"use strict";function o(t){return function(){return t}}var s=function(){};s.thatReturns=o,s.thatReturnsFalse=o(!1),s.thatReturnsTrue=o(!0),s.thatReturnsNull=o(null),s.thatReturnsThis=function(){return this},s.thatReturnsArgument=function(t){return t},t.exports=s},function(t,e,i){"use strict";function o(t,e,i,o,a,n,r,h){if(s(e),!t){var c;if(void 0===e)c=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var m=[i,o,a,n,r,h],l=0;c=new Error(e.replace(/%s/g,function(){return m[l++]})),c.name="Invariant Violation"}throw c.framesToPop=1,c}}var s=function(t){};t.exports=o},function(t,e,i){"use strict";t.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(t,e){!function(){"use strict";function t(t){switch(t=d(t)?t:{},this.elementId="string"==typeof t.elementId?t.elementId:"gitGraph",this.author="string"==typeof t.author?t.author:"Sergio Flores <saxo-guy@epic.com>",this.reverseArrow=m(t.reverseArrow,!1),"string"==typeof t.template||d(t.template)?this.template=this.newTemplate(t.template):t.template instanceof s?this.template=t.template:this.template=this.newTemplate("metro"),this.mode=t.mode||null,"compact"===this.mode&&(this.template.commit.message.display=!1),t.orientation){case"vertical-reverse":this.template.commit.spacingY*=-1,this.orientation="vertical-reverse",this.template.branch.labelRotation=y(t,"template.branch.labelRotation")?0:t.template.branch.labelRotation,this.template.commit.tag.spacingY*=-1;break;case"horizontal":this.template.commit.message.display=!1,this.template.commit.spacingX=this.template.commit.spacingY,this.template.branch.spacingY=this.template.branch.spacingX,this.template.commit.spacingY=0,this.template.branch.spacingX=0,this.orientation="horizontal",this.template.branch.labelRotation=y(t,"template.branch.labelRotation")?-90:t.template.branch.labelRotation,this.template.commit.tag.spacingX=-this.template.commit.spacingX,this.template.commit.tag.spacingY=this.template.branch.spacingY;break;case"horizontal-reverse":this.template.commit.message.display=!1,this.template.commit.spacingX=-this.template.commit.spacingY,this.template.branch.spacingY=this.template.branch.spacingX,this.template.commit.spacingY=0,this.template.branch.spacingX=0,this.orientation="horizontal-reverse",this.template.branch.labelRotation=y(t,"template.branch.labelRotation")?90:t.template.branch.labelRotation,this.template.commit.tag.spacingX=-this.template.commit.spacingY,this.template.commit.tag.spacingY=this.template.branch.spacingY;break;default:this.orientation="vertical",this.template.branch.labelRotation=y(t,"template.branch.labelRotation")?0:t.template.branch.labelRotation}this.marginX=this.template.branch.spacingX+2*this.template.commit.dot.size,this.marginY=this.template.branch.spacingY+2*this.template.commit.dot.size,this.offsetX=0,this.offsetY=0,this.canvas=document.getElementById(this.elementId)||t.canvas,this.context=this.canvas.getContext("2d"),this.context.textBaseline="center",this.tooltip=document.createElement("div"),this.tooltip.className="gitgraph-tooltip",this.tooltip.style.position="fixed",this.tooltip.style.display="none",(t.tooltipContainer||document.body).appendChild(this.tooltip),this.HEAD=null,this.branches=[],this.commits=[],this.columnMax=0,this.commitOffsetX=t.initCommitOffsetX||0,this.commitOffsetY=t.initCommitOffsetY||0,this.mouseMoveOptions={handleEvent:this.hover,gitgraph:this},this.canvas.addEventListener("mousemove",this.mouseMoveOptions,!1),this.mouseDownOptions={handleEvent:this.click,gitgraph:this},this.canvas.addEventListener("mousedown",this.mouseDownOptions,!1),window.onresize=this.render.bind(this)}function e(e){if(e.parent instanceof t!=0){if(e=d(e)?e:{},this.parent=e.parent,e.parentCommit&&e.parentBranch){if(e.parentCommit.branch!==e.parentBranch)return;this.parentCommit=e.parentCommit,this.parentBranch=e.parentBranch}else e.parentCommit?(this.parentCommit=e.parentCommit,this.parentBranch=e.parentCommit.branch):e.parentBranch?(this.parentCommit=r(e.parentBranch),this.parentBranch=e.parentBranch):(this.parentCommit=null,this.parentBranch=null);this.name="string"==typeof e.name?e.name:"no-name",this.commitDefaultOptions=d(e.commitDefaultOptions)?e.commitDefaultOptions:{},this.context=this.parent.context,this.template=this.parent.template,this.lineWidth=e.lineWidth||this.template.branch.lineWidth,this.lineDash=e.lineDash||this.template.branch.lineDash,this.showLabel=m(e.showLabel,this.template.branch.showLabel),this.spacingX=this.template.branch.spacingX,this.spacingY=this.template.branch.spacingY,this.size=0,this.height=0,this.width=0,this.commits=[],this.path=[],"number"==typeof e.column?this.column=e.column:(this.column=0,this.calculColumn()),this.parent.columnMax=this.column>this.parent.columnMax?this.column:this.parent.columnMax,this.offsetX=this.column*this.spacingX,this.offsetY=this.column*this.spacingY,this.parentBranch&&this.parentCommit?this.parentCommit===r(this.parentBranch)&&this.commits.length>0?this.startPoint={x:this.parentBranch.offsetX-this.parent.commitOffsetX+this.template.commit.spacingX,y:this.parentBranch.offsetY-this.parent.commitOffsetY+this.template.commit.spacingY,type:"start"}:this.startPoint={x:this.parentCommit.x,y:this.parentCommit.y,type:"start"}:this.startPoint=null;var i=this.column%this.template.colors.length;this.color=e.color||this.template.branch.color||this.template.colors[i],this.checkout()}}function i(e){e.parent instanceof t!=0&&(e=d(e)?e:{},this.parent=e.parent,this.template=this.parent.template,this.context=this.parent.context,this.branch=e.branch,this.author=e.author||this.parent.author,this.date=e.date||(new Date).toUTCString(),this.detail=e.detail||null,this.sha1=e.sha1||Math.random(100).toString(16).substring(3,10),this.message=e.message||"He doesn't like George Michael! Boooo!",this.arrowDisplay=e.arrowDisplay,this.messageDisplay=m(e.messageDisplay,this.template.commit.message.display),this.messageAuthorDisplay=m(e.messageAuthorDisplay,this.template.commit.message.displayAuthor),this.messageBranchDisplay=m(e.messageBranchDisplay,this.template.commit.message.displayBranch),this.messageHashDisplay=m(e.messageHashDisplay,this.template.commit.message.displayHash),this.messageColor=e.messageColor||e.color,this.messageFont=e.messageFont||this.template.commit.message.font,this.dotColor=e.dotColor||e.color,this.dotSize=e.dotSize||this.template.commit.dot.size,this.dotStrokeWidth=e.dotStrokeWidth||this.template.commit.dot.strokeWidth,this.dotStrokeColor=e.dotStrokeColor||this.template.commit.dot.strokeColor||e.color,this.lineDash=e.lineDash||this.template.commit.dot.lineDash,this.type=e.type||null,this.tooltipDisplay=m(e.tooltipDisplay,!0),this.onClick=e.onClick||null,this.representedObject=e.representedObject||null,this.parentCommit=e.parentCommit,this.x=e.x,this.y=e.y,this.showLabel=e.showLabel,this.labelColor=e.labelColor||e.color,this.labelFont=e.labelFont||this.template.branch.labelFont,n(this,e),this.parent.commits.push(this))}function o(t,e){if(!d(t))throw new Error("You can't tag a commit that doesn't exist");e=d(e)?e:{},this.color=e.color||t.color,this.font=e.font||t.template.commit.tag.font;var i=t.context.font;t.context.font=this.font;var o=t.context.measureText(t.tag).width;this.width=Math.max(t.template.commit.tag.spacingX,o);var s=0,a=0,n=t.parent.columnMax+1;return g(t.parent)?(s=t.x-t.dotSize/2,a=n*t.template.commit.tag.spacingY-t.template.commit.tag.spacingY/2):(s=n*t.template.commit.tag.spacingX-t.template.commit.tag.spacingX/2+o/2,a=t.y-t.dotSize/2),l(t.context,s,a,t.tag,this.color,this.font,0,t.displayTagBox),t.context.font=i,this}function s(t){t=d(t)?t:{},t.branch=t.branch||{},t.arrow=t.arrow||{},t.commit=t.commit||{},t.commit.dot=t.commit.dot||{},t.commit.tag=t.commit.tag||{},t.commit.message=t.commit.message||{},this.colors=t.colors||["#6963FF","#47E8D4","#6BDB52","#E84BA5","#FFA657"],this.branch={},this.branch.color=t.branch.color||null,this.branch.lineWidth=t.branch.lineWidth||2,this.branch.lineDash=t.branch.lineDash||[],this.branch.showLabel=t.branch.showLabel||!1,this.branch.labelColor=t.branch.labelColor||null,this.branch.labelFont=t.branch.labelFont||"normal 8pt Calibri",this.branch.labelRotation=void 0!==t.branch.labelRotation?t.branch.labelRotation:null,this.branch.mergeStyle=t.branch.mergeStyle||"bezier",this.branch.spacingX="number"==typeof t.branch.spacingX?t.branch.spacingX:20,this.branch.spacingY=t.branch.spacingY||0,this.arrow={},this.arrow.size=t.arrow.size||null,this.arrow.color=t.arrow.color||null,this.arrow.active="number"==typeof this.arrow.size,this.arrow.offset=t.arrow.offset||2,this.commit={},this.commit.spacingX=t.commit.spacingX||0,this.commit.spacingY="number"==typeof t.commit.spacingY?t.commit.spacingY:25,this.commit.widthExtension="number"==typeof t.commit.widthExtension?t.commit.widthExtension:0,this.commit.tooltipHTMLFormatter=t.commit.tooltipHTMLFormatter||null,this.commit.shouldDisplayTooltipsInCompactMode=m(t.commit.shouldDisplayTooltipsInCompactMode,!0),this.commit.color=t.commit.color||null,this.commit.dot={},this.commit.dot.color=t.commit.dot.color||null,this.commit.dot.size=t.commit.dot.size||3,this.commit.dot.strokeWidth=t.commit.dot.strokeWidth||null,this.commit.dot.strokeColor=t.commit.dot.strokeColor||null,this.commit.dot.lineDash=t.commit.dot.lineDash||this.branch.lineDash,this.commit.tag={},this.commit.tag.color=t.commit.tag.color||this.commit.dot.color,this.commit.tag.font=t.commit.tag.font||t.commit.message.font||"normal 10pt Calibri",this.commit.tag.spacingX=this.branch.spacingX,this.commit.tag.spacingY=this.commit.spacingY,this.commit.message={},this.commit.message.display=m(t.commit.message.display,!0),this.commit.message.displayAuthor=m(t.commit.message.displayAuthor,!0),this.commit.message.displayBranch=m(t.commit.message.displayBranch,!0),this.commit.message.displayHash=m(t.commit.message.displayHash,!0),this.commit.message.color=t.commit.message.color||null,this.commit.message.font=t.commit.message.font||"normal 12pt Calibri"}function a(t){return t.slice(-1)[0]}function n(t,e){t.tag=e.tag||null,t.tagColor=e.tagColor||t.messageColor,t.tagFont=e.tagFont||t.template.commit.tag.font,t.displayTagBox=m(e.displayTagBox,!0)}function r(t){return a(t.commits)?a(t.commits):t.parentBranch?r(t.parentBranch):null}function h(t){return JSON.parse(JSON.stringify(t))}function c(t){var e=document.getElementsByTagName("body")[0],i=document.createElement("div"),o=document.createTextNode("Mg");i.appendChild(o),i.setAttribute("style","font: "+t+"; display: inline-block;"),e.appendChild(i);var s=i.offsetHeight;return e.removeChild(i),s}function m(t,e){return"boolean"==typeof t?t:e}function l(t,e,i,o,s,a,n,r){t.save(),t.translate(e,i),t.rotate(n*(Math.PI/180)),t.textAlign="center",t.font=a;var h=t.measureText(o).width,m=c(a);r?(t.beginPath(),t.rect(-h/2-4,-m/2+2,h+8,m+2),t.fillStyle=s,t.fill(),t.lineWidth=2,t.strokeStyle="black",t.stroke(),t.fillStyle="black"):t.fillStyle=s,t.fillText(o,0,m/2),t.restore()}function p(t,e,i){var o;document.createEvent?(o=document.createEvent("HTMLEvents"),o.initEvent(e,!0,!0)):(o=document.createEventObject(),o.eventType=e),o.eventName=e,o.data=i||{},document.createEvent?t.dispatchEvent(o):t.fireEvent("on"+o.eventType,o)}function u(t){var e,i;return i=1,window.devicePixelRatio&&(e=t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1,i*=window.devicePixelRatio/e),i}function f(t){return"vertical"===t.orientation||"vertical-reverse"===t.orientation}function g(t){return"horizontal"===t.orientation||"horizontal-reverse"===t.orientation}function d(t){return"object"==typeof t}function y(t,e){return!e.split(".").every(function(e){return"object"==typeof t&&null!==t&&e in t&&(t=t[e],!0)})}t.prototype.dispose=function(){this.canvas.removeEventListener("mousemove",this.mouseMoveOptions,!1),this.canvas.removeEventListener("mousedown",this.mouseDownOptions,!1)},t.prototype.branch=function(t){if("string"==typeof t){var i=t;t={},t.name=i}t=d(t)?t:{},t.parent=this,t.parentBranch=t.parentBranch||this.HEAD;var o=new e(t);return this.branches.push(o),o},t.prototype.orphanBranch=function(t){if("string"==typeof t){var i=t;t={},t.name=i}t=d(t)?t:{},t.parent=this;var o=new e(t);return this.branches.push(o),o},t.prototype.commit=function(t){return this.HEAD.commit(t),this},t.prototype.tag=function(t){return this.HEAD.tag(t),this},t.prototype.newTemplate=function(t){return"string"==typeof t?(new s).get(t):new s(t)},t.prototype.render=function(){this.scalingFactor=u(this.context);var t={x:Math.abs((this.columnMax+1)*this.template.branch.spacingX)+Math.abs(this.commitOffsetX)+2*this.marginX,y:Math.abs((this.columnMax+1)*this.template.branch.spacingY)+Math.abs(this.commitOffsetY)+2*this.marginY};this.template.commit.message.display&&(t.x+=800),t.x+=this.template.commit.widthExtension,this.canvas.style.width=t.x+"px",this.canvas.style.height=t.y+"px",this.canvas.width=t.x*this.scalingFactor,this.canvas.height=t.y*this.scalingFactor,this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.context.translate(this.marginX,this.marginY),this.template.commit.spacingY>0&&(this.context.translate(0,this.canvas.height-2*this.marginY),this.offsetY=this.canvas.height-2*this.marginY),this.template.commit.spacingX>0&&(this.context.translate(this.canvas.width-2*this.marginX,0),this.offsetX=this.canvas.width-2*this.marginX),this.context.scale(this.scalingFactor,this.scalingFactor);for(var e,i=this.branches.length-1;e=this.branches[i];i--)e.render();for(var o,s=0;o=this.commits[s];s++)o.render();p(this.canvas,"graph:render",{id:this.elementId})},t.prototype.applyCommits=function(t,e){function i(t){var e=document.getElementById(t),i=e.getBoundingClientRect();return{top:i.top+document.body.scrollTop,left:i.left+document.body.scrollLeft}}for(var o,s=t.offsetX||t.pageX-i(this.elementId).left,a=t.offsetY||t.pageY-i(this.elementId).top,n=0;o=this.commits[n];n++){var r=o.x+(this.offsetX+this.marginX)/this.scalingFactor-s,h=o.y+(this.offsetY+this.marginY)/this.scalingFactor-a;e(o,Math.sqrt(Math.pow(r,2)+Math.pow(h,2))<this.template.commit.dot.size,t)}},t.prototype.hover=function(t){function e(e){e.tooltipDisplay&&(o.tooltip.style.left=t.clientX+"px",o.tooltip.style.top=t.clientY+"px",null!==o.template.commit.tooltipHTMLFormatter?o.tooltip.innerHTML=o.template.commit.tooltipHTMLFormatter(e):o.tooltip.textContent=e.sha1+" - "+e.message,o.tooltip.style.display="block")}function i(t,e){var i={author:t.author,message:t.message,date:t.date,sha1:t.sha1};p(o.canvas,"commit:"+e,i)}var o=this.gitgraph,s=!0;o.applyCommits(t,function(t,a,n){a?(!o.template.commit.message.display&&o.template.commit.shouldDisplayTooltipsInCompactMode&&e(t),t.isMouseOver||i(t,"mouseover"),s=!1,t.isMouseOver=!0):(t.isMouseOver&&i(t,"mouseout"),t.isMouseOver=!1)}),s&&(o.tooltip.style.display="none")},t.prototype.click=function(t){this.gitgraph.applyCommits(t,function(t,e,i){e&&null!==t.onClick&&t.onClick(t,!0,i)})},e.prototype.branch=function(t){if("string"==typeof t){var i=t;t={},t.name=i}t=d(t)?t:{},t.parent=this.parent,t.parentBranch=t.parentBranch||this;var o=new e(t);return this.parent.branches.push(o),o},e.prototype.render=function(){this.context.beginPath();for(var t,e=0;t=this.path[e];e++)if("start"===t.type)this.context.moveTo(t.x,t.y);else if("bezier"===this.template.branch.mergeStyle){var i=this.path[e-1];this.context.bezierCurveTo(i.x-this.template.commit.spacingX/2,i.y-this.template.commit.spacingY/2,t.x+this.template.commit.spacingX/2,t.y+this.template.commit.spacingY/2,t.x,t.y)}else this.context.lineTo(t.x,t.y);this.context.lineWidth=this.lineWidth,this.context.strokeStyle=this.color,"function"==typeof this.context.setLineDash&&this.context.setLineDash(this.lineDash),this.context.stroke(),this.context.closePath()},e.prototype.commit=function(t){"string"==typeof t?t={message:t}:"object"!=typeof t&&(t={}),t.arrowDisplay=this.template.arrow.active,t.branch=this;var o=this.column%this.template.colors.length;t.color=t.color||this.commitDefaultOptions.color||this.template.commit.color||this.template.colors[o],t.parent=this.parent,t.parentCommit=t.parentCommit||r(this),"compact"===this.parent.mode&&a(this.parent.commits)&&a(this.parent.commits).branch!==t.branch&&t.branch.commits.length&&"mergeCommit"!==t.type&&(this.parent.commitOffsetX-=this.template.commit.spacingX,this.parent.commitOffsetY-=this.template.commit.spacingY),t.messageColor=t.messageColor||this.commitDefaultOptions.messageColor||this.template.commit.message.color||t.color||null,t.labelColor=t.labelColor||this.commitDefaultOptions.labelColor||this.template.branch.labelColor||t.color||null,t.tagColor=t.tagColor||this.commitDefaultOptions.tagColor||this.template.commit.tag.color||t.color||null,t.dotColor=t.dotColor||this.commitDefaultOptions.dotColor||this.template.commit.dot.color||t.color||null,t.x=this.offsetX-this.parent.commitOffsetX,t.y=this.offsetY-this.parent.commitOffsetY;var s="compact"===this.parent.mode;"string"!=typeof t.detailId||s?t.detail=null:t.detail=document.getElementById(t.detailId);var n=a(t.branch.commits)||{};t.x+t.y===n.x+n.y&&(this.parent.commitOffsetX+=this.template.commit.spacingX,this.parent.commitOffsetY+=this.template.commit.spacingY,t.x=this.offsetX-this.parent.commitOffsetX,t.y=this.offsetY-this.parent.commitOffsetY),t.parentCommit instanceof i==0&&this.parentBranch instanceof e&&(t.parentCommit=this.parentCommit);var h=!(t.parentCommit instanceof i),c=0===this.path.length;t.showLabel=c&&this.showLabel,t.showLabel&&(t.x-=this.template.commit.spacingX,t.y-=this.template.commit.spacingY);var m=new i(t);this.commits.push(m);var l={x:m.x,y:m.y,type:"joint"};return!h&&c?(this.pushPath(this.startPoint),f(this.parent)?this.pushPath({x:m.x,y:this.startPoint.y-this.template.commit.spacingY,type:"joint"}):this.pushPath({x:this.startPoint.x-this.template.commit.spacingX,y:m.y,type:"joint"})):c&&(l.type="start"),this.pushPath(l),this.parent.commitOffsetX+=this.template.commit.spacingX*(t.showLabel?2:1),this.parent.commitOffsetY+=this.template.commit.spacingY*(t.showLabel?2:1),null!==m.detail&&f(this.parent)&&(m.detail.style.display="block","vertical-reverse"===this.parent.orientation?this.parent.commitOffsetY+=m.detail.clientHeight:this.parent.commitOffsetY-=m.detail.clientHeight),this.parent.render(),this},e.prototype.tag=function(t){"string"==typeof t&&(t={tag:t}),t=d(t)?t:{};var e=a(this.commits);return d(e)&&(n(e,t),this.parent.render()),this},e.prototype.checkout=function(){this.parent.HEAD=this},e.prototype.delete=function(){this.isDeleted=!0},e.prototype.merge=function(t,i){var o=t||this.parent.HEAD;if(o instanceof e==0||o===this)return this;var s=this.commits[0];if(!s)return console.log(this.name+" is already up-to-date with "+o.name),this;var n="Merge branch `"+this.name+"` into `"+o.name+"`";if("object"!=typeof i){var c=i;i={},i.message="string"==typeof c?c:n}else i.message=i.message||n;i.type="mergeCommit",i.parentCommit=r(this);var m=s.parentCommit,l=r(o),p=m&&m.sha1===l.sha1;if(i.fastForward&&p){var u=g(this.parent);if(this.color=o.color,u){var f=o.path[1].y;this.path.forEach(function(t){t.y=f})}else{var d=o.path[1].x;this.path.forEach(function(t){t.x=d})}this.commits.forEach(function(t){u?t.y=m.y:t.x=m.x,t.labelColor=m.labelColor,t.messageColor=m.messageColor,t.dotColor=m.dotColor,t.dotStrokeColor=m.dotStrokeColor})}else{o.commit(i);var y=0;i.detail&&("vertical"===this.parent.orientation?y=-1*i.detail.clientHeight:"vertical-reverse"===this.parent.orientation&&(y=i.detail.clientHeight));var b=a(o.commits),v={x:this.offsetX+this.template.commit.spacingX*(b.showLabel?3:2)-this.parent.commitOffsetX,y:this.offsetY+this.template.commit.spacingY*(b.showLabel?3:2)-this.parent.commitOffsetY+y,type:"joint"};this.pushPath(h(v));var x={x:b.x,y:b.y,type:"end"};this.pushPath(x),v.type="start",this.pushPath(v)}return this.parent.render(),this.parent.HEAD=o,this},e.prototype.calculColumn=function(){for(var t,e=[],i=0;t=this.parent.branches[i];i++)t.isDeleted||(t.column in e||(e[t.column]=0),e[t.column]++);for(this.column=0;this.column in e&&0!==e[this.column];this.column++);},e.prototype.pushPath=function(t){var e=a(this.path);e?e.x===t.x&&e.y===t.y?"start"!==e.type&&"end"===t.type?e.type="end":"joint"===t.type||this.path.push(t):"joint"===t.type?(t.x-e.x)*this.template.commit.spacingX<0?this.path.push(t):(t.y-e.y)*this.template.commit.spacingY<0&&this.path.push(t):this.path.push(t):this.path.push(t)},i.prototype.render=function(){var t=this.template.commit.tag.spacingX,e=(this.parent.columnMax+1)*this.template.branch.spacingX+t;if(this.showLabel)if(g(this.parent)&&this.template.branch.labelRotation%180==0){var s=this.y-this.dotSize-c(this.labelFont);l(this.context,this.x,s,this.branch.name,this.labelColor,this.labelFont,this.template.branch.labelRotation,!0)}else l(this.context,this.x+this.template.commit.spacingX,this.y+this.template.commit.spacingY,this.branch.name,this.labelColor,this.labelFont,this.template.branch.labelRotation,!0);if(this.context.beginPath(),this.context.arc(this.x,this.y,this.dotSize,0,2*Math.PI,!1),this.context.fillStyle=this.dotColor,this.context.strokeStyle=this.dotStrokeColor,this.context.lineWidth=this.dotStrokeWidth,"function"==typeof this.context.setLineDash&&this.context.setLineDash(this.lineDash),"number"==typeof this.dotStrokeWidth&&this.context.stroke(),this.context.fill(),this.context.closePath(),this.arrowDisplay&&this.parentCommit instanceof i&&this.arrow(),null!==this.tag&&(e+=new o(this,{color:this.tagColor,font:this.tagFont}).width-t),null!==this.detail&&f(this.parent)){this.detail.style.left=this.parent.canvas.offsetLeft+e+60+"px";var a=this.parent.canvas.offsetTop+this.y;if("vertical-reverse"===this.parent.orientation){var n=this.parent.canvas.clientHeight-this.detail.clientHeight;this.detail.style.top=a+n-30+"px"}else this.detail.style.top=a+30+"px"}if(this.messageDisplay){var r=this.message;this.messageHashDisplay&&(r=this.sha1+" "+r),this.messageAuthorDisplay&&(r+=this.author?" - "+this.author:""),this.messageBranchDisplay&&(r=(this.branch.name?"["+this.branch.name+"] ":"")+r),this.context.font=this.messageFont,this.context.fillStyle=this.messageColor,this.context.fillText(r,e,this.y+this.dotSize/2)}},i.prototype.arrow=function(){function t(t,e){var i=o?-1:1;return Math.atan2(i*t,i*e)}var e=this.template.arrow.size,i=this.template.arrow.color||this.branch.color,o=this.parent.reverseArrow,s=t(this.parentCommit.y-this.y,this.parentCommit.x-this.x),a=this===this.branch.commits[0];if("mergeCommit"===this.type||a){var n=this.parentCommit.branch.column-this.branch.column,r=this.showLabel?2:1,h=this.template.branch.spacingX*n+this.template.commit.spacingX*r,c=(a||o)&&Math.abs(this.y-this.parentCommit.y)>Math.abs(this.template.commit.spacingY),m=this.x===this.parentCommit.x;f(this.parent)&&(c||m)&&(h=0);var l=this.template.branch.spacingY*n+this.template.commit.spacingY*r,p=(a||o)&&Math.abs(this.x-this.parentCommit.x)>Math.abs(this.template.commit.spacingX),u=this.y===this.parentCommit.y;g(this.parent)&&(p||u)&&(l=0),s=t(l,h),i=this.parentCommit.branch.color}var d=Math.PI/7,y=o?this.parentCommit.x:this.x,b=o?this.parentCommit.y:this.y,v=this.template.commit.dot.size+this.template.arrow.offset,x=v*Math.cos(s)+y,w=v*Math.sin(s)+b,C=(v+e)*Math.cos(s-d)+y,Y=(v+e)*Math.sin(s-d)+b,O=(v+e/2)*Math.cos(s)+y,X=(v+e/2)*Math.sin(s)+b,D=(v+e)*Math.cos(s+d)+y,k=(v+e)*Math.sin(s+d)+b;this.context.beginPath(),this.context.fillStyle=i,this.context.moveTo(x,w),this.context.lineTo(C,Y),this.context.quadraticCurveTo(O,X,D,k),this.context.lineTo(D,k),this.context.fill()},s.prototype.get=function(t){var e={};switch(t){case"blackarrow":e={branch:{color:"#000000",lineWidth:4,spacingX:50,mergeStyle:"straight",labelRotation:0},commit:{spacingY:-60,dot:{size:12,strokeColor:"#000000",strokeWidth:7},message:{color:"black"}},arrow:{size:16,offset:2.5}};break;case"metro":default:e={colors:["#979797","#008fb5","#f1c109"],branch:{lineWidth:10,spacingX:50,labelRotation:0},commit:{spacingY:-80,dot:{size:14},message:{font:"normal 14pt Arial"}}}}return new s(e)},Array.prototype.every||(Array.prototype.every=function(t,e){var i,o;if(null===this)throw new TypeError("this is null or not defined");var s=Object(this),a=s.length>>>0;if("function"!=typeof t)throw new TypeError;for(arguments.length>1&&(i=e),o=0;o<a;){var n;if(o in s&&(n=s[o],!t.call(i,n,o,s)))return!1;o++}return!0}),window.GitGraph=t,window.GitGraph.Branch=e,window.GitGraph.Commit=i,window.GitGraph.Template=s}()}])});